function getMimeType(filepath) {
    var mimeTypes = {
     "3g2": "video/3gpp2",
     "3gp": "video/3gpp",
     "3gp2": "video/3gpp2",
     "3gpp": "video/3gpp",
     "aa": "audio/audible",
     "AAC": "audio/aac",
     "aax": "audio/vnd.audible.aax",
     "ac3": "audio/ac3",
     "ADT": "audio/vnd.dlna.adts",
     "ADTS": "audio/aac",
     "aif": "audio/aiff",
     "aifc": "audio/aiff",
     "aiff": "audio/aiff",
     "art": "image/x-jg",
     "asf": "video/x-ms-asf",
     "asr": "video/x-ms-asf",
     "asx": "video/x-ms-asf",
     "au": "audio/basic",
     "avi": "video/x-msvideo",
     "axa": "audio/annodex",
     "axv": "video/annodex",
     "bmp": "image/bmp",
     "caf": "audio/x-caf",
     "cdda": "audio/aiff",
     "cmx": "image/x-cmx",
     "cod": "image/cis-cod",
     "dib": "image/bmp",
     "dif": "video/x-dv",
     "divx": "video/divx",
     "dv": "video/x-dv",
     "dwf": "drawing/x-dwf",
     "eml": "message/rfc822",
     "flac": "audio/flac",
     "flr": "x-world/x-vrml",
     "flv": "video/x-flv",
     "gif": "image/gif",
     "gsm": "audio/x-gsm",
     "ico": "image/x-icon",
     "ief": "image/ief",
     "IVF": "video/x-ivf",
     "jfif": "image/pjpeg",
     "jpe": "image/jpeg",
     "jpeg": "image/jpeg",
     "jpg": "image/jpeg",
     "lsf": "video/x-la-asf",
     "lsx": "video/x-la-asf",
     "m1v": "video/mpeg",
     "m2t": "video/vnd.dlna.mpeg-tts",
     "m2ts": "video/vnd.dlna.mpeg-tts",
     "m2v": "video/mpeg",
     "m3u": "audio/x-mpegurl",
     "m3u8": "audio/x-mpegurl",
     "m4a": "audio/m4a",
     "m4b": "audio/m4b",
     "m4p": "audio/m4p",
     "m4r": "audio/x-m4r",
     "m4v": "video/x-m4v",
     "mac": "image/x-macpaint",
     "mht": "message/rfc822",
     "mhtml": "message/rfc822",
     "mid": "audio/mid",
     "midi": "audio/mid",
     "mk3d": "video/x-matroska-3d",
     "mka": "audio/x-matroska",
     "mkv": "video/x-matroska",
     "mod": "video/mpeg",
     "mov": "video/quicktime",
     "movie": "video/x-sgi-movie",
     "mp2": "video/mpeg",
     "mp2v": "video/mpeg",
     "mp3": "audio/mpeg",
     "mp4": "video/mp4",
     "mp4v": "video/mp4",
     "mpa": "video/mpeg",
     "mpe": "video/mpeg",
     "mpeg": "video/mpeg",
     "mpg": "video/mpeg",
     "mpv2": "video/mpeg",
     "mqv": "video/quicktime",
     "mts": "video/vnd.dlna.mpeg-tts",
     "nsc": "video/x-ms-asf",
     "nws": "message/rfc822",
     "oga": "audio/ogg",
     "ogg": "audio/ogg",
     "ogv": "video/ogg",
     "opus": "audio/ogg",
     "pbm": "image/x-portable-bitmap",
     "pct": "image/pict",
     "txt": "text/plain",
     "pgm": "image/x-portable-graymap",
     "pic": "image/pict",
     "pict": "image/pict",
     "pls": "audio/scpls",
     "png": "image/png",
     "pnm": "image/x-portable-anymap",
     "pnt": "image/x-macpaint",
     "pntg": "image/x-macpaint",
     "pnz": "image/png",
     "ppm": "image/x-portable-pixmap",
     "qt": "video/quicktime",
     "qti": "image/x-quicktime",
     "qtif": "image/x-quicktime",
     "ra": "audio/x-pn-realaudio",
     "ram": "audio/x-pn-realaudio",
     "ras": "image/x-cmu-raster",
     "rf": "image/vnd.rn-realflash",
     "rgb": "image/x-rgb",
     "rmi": "audio/mid",
     "rpm": "audio/x-pn-realaudio-plugin",
     "sd2": "audio/x-sd2",
     "smd": "audio/x-smd",
     "smx": "audio/x-smd",
     "smz": "audio/x-smd",
     "snd": "audio/basic",
     "spx": "audio/ogg",
     "svg": "image/svg+xml",
     "tif": "image/tiff",
     "tiff": "image/tiff",
     "ts": "video/vnd.dlna.mpeg-tts",
     "tts": "video/vnd.dlna.mpeg-tts",
     "vbk": "video/mpeg",
     "wav": "audio/wav",
     "wave": "audio/wav",
     "wax": "audio/x-ms-wax",
     "wbmp": "image/vnd.wap.wbmp",
     "wdp": "image/vnd.ms-photo",
     "webm": "video/webm",
     "webp": "image/webp",
     "wm": "video/x-ms-wm",
     "wma": "audio/x-ms-wma",
     "wmp": "video/x-ms-wmp",
     "wmv": "video/x-ms-wmv",
     "wmx": "video/x-ms-wmx",
     "wrl": "x-world/x-vrml",
     "wrz": "x-world/x-vrml",
     "wvx": "video/x-ms-wvx",
     "xaf": "x-world/x-vrml",
     "xbm": "image/x-xbitmap",
     "xof": "x-world/x-vrml",
     "xpm": "image/x-xpixmap",
     "xwd": "image/x-xwindowdump",
    }

    var ext =  filepath.split('.').pop();
    if(ext in mimeTypes)
        return mimeTypes[ext]
    else
        return 'application/pdf'
}
